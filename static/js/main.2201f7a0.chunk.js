(this["webpackJsonppreprint-similarity-search"]=this["webpackJsonppreprint-similarity-search"]||[]).push([[0],{33:function(e,t,n){},49:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r,a,c,s,i,o,l=n(25),u=n(80),j=n(3),d=n(2);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){var n=e.title,l=e.titleId,u=h(e,["title","titleId"]);return d.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",id:"logo",ref:t,"aria-labelledby":l},u),n?d.createElement("title",{id:l},n):null,r||(r=d.createElement("style",null,"\n    #logo:hover #star,\n    #logo[data-spin] #star {\n      animation: star_rotate 2s ease forwards infinite;\n    }\n    @keyframes star_rotate {\n      from {\n        transform: rotate(0);\n      }\n      to {\n        transform: rotate(360deg);\n      }\n    }\n  ")),a||(a=d.createElement("path",{id:"book_filling",fill:"#ffe0b2",d:"       M 10 50       L 50 70       L 90 50       L 90 35       L 50 55       L 10 35       A 10 10 0 0 0 10 50       M 10 65       L 50 85       L 90 65       L 90 50       L 50 70       L 10 50       A 10 10 0 0 0 10 65     "})),c||(c=d.createElement("path",{id:"book_top_cover",fill:"#000000",stroke:"#000000",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round",d:"       M 50 15       L 90 35       L 50 55       L 10 35       z     "})),s||(s=d.createElement("path",{id:"book_outlines",fill:"none",stroke:"#000000",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round",d:"       M 10 50       L 30 60       M 47.5 68.75       L 50 70       L 90 50       M 10 65       L 50 85       L 90 65       M 10 35       A 10 10 0 0 0 10 50       A 10 10 0 0 0 10 65     "})),i||(i=d.createElement("path",{id:"bookmark",fill:"#000000",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",d:"       M 35 55       L 35 71.25       L 38.75 69.25       L 42.5 74.75       L 42.5 58.75       z     "})),o||(o=d.createElement("g",{transform:"translate(50,34) rotate(26.565) skewX(-26.565) scale(0.10)"},d.createElement("path",{id:"star",fill:"#ffe0b2",stroke:"#ffe0b2",strokeWidth:20,strokeLinecap:"round",strokeLinejoin:"round",d:"         M 0.000 -100.000         L 29.389 -40.451         L 95.106 -30.902         L 47.553 15.451         L 58.779 80.902         L 0.000 50.000         L -58.779 80.902         L -47.553 15.451         L -95.106 -30.902         L -29.389 -40.451         z       "}))))}var f=d.forwardRef(p),m=(n.p,n(49),n(0)),O=function(){return Object(m.jsx)("header",{children:Object(m.jsxs)("section",{children:[Object(m.jsx)("h1",{children:"Preprint"}),Object(m.jsx)("h2",{children:"Similarity Search"}),Object(m.jsx)(f,{className:"logo"})]})})},x=n(8),g=n.n(x),v=n(14),w=n(7),y=n(10),k=n(12),N=n(34),S=n(35),L=n(38),_=n(39),P=function(e){Object(S.a)(n,e);var t=Object(L.a)(n);function n(){var e;Object(N.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="CustomError",e}return n}(Object(_.a)(Error)),M=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r,a,c,s,i,o,l,u,j,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.doi,r=t.text,a=r?"https://api-pss.greenelab.com/text":"https://api-pss.greenelab.com/doi/"+n,c={method:r?"POST":"GET",body:r||null},e.next=5,fetch(a,c);case 5:if((s=e.sent).ok){e.next=8;break}throw new Error;case 8:return e.next=10,s.json();case 10:if(!(i=e.sent).message){e.next=13;break}throw new P(i.message);case 13:return(o=i.paper_info||{}).xml_found=i.xml_found,l=i.journal_neighbors||[],u=i.paper_neighbors||[],j=i.coordinates||{},d=function(e){return e.pmcid=(e.pmcid||e.document||"").replace("PMC","")},l.forEach(d),u.forEach(d),e.abrupt("return",{preprint:o,similarJournals:l,similarPapers:u,coordinates:j});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.pmcid})).filter((function(e){return e})),e.next=3,fetch("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pmc&email=greenescientist@gmail.com&retmode=json&id="+n.join(","));case 3:return e.next=5,e.sent.json();case 5:return r=e.sent.result,a=function(e){return Object(k.a)(Object(k.a)({},e),r[e.pmcid]||{})},t=t.map(a),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.doi||null,title:e.title||"",authors:(e.authors||"").split("; ").join(", "),journal:e.publisher||"",year:(e.accepted_date||"").split("-")[0]||"",prelim:!e.xml_found,text:!e.title}},F=function(e){var t=e.map((function(e){return e.distance})),n=Math.max.apply(Math,Object(y.a)(t)),r=Math.min.apply(Math,Object(y.a)(t)),a=n-r;return e.sort((function(e,t){return e.distance-t.distance})),e=e.map((function(e,t){return{id:e.pmcid||null,title:e.title||"",authors:(e.authors||[]).map((function(e){return e.name||""})).filter((function(e){return e})).join(", "),journal:(e.fulljournalname||e.journal||"").split("_").join(" "),year:(e.pubdate||"").split(" ")[0]||"",distance:e.distance,strength:(e.distance-r)/a,rank:t+1}}))},T=n(40),D=n(79),A=(n(52),Object(d.forwardRef)((function(e,t){var n=e.content,r=e.children,a=Object(T.a)(e,["content","children"]),c=Object(d.useState)(null),s=Object(j.a)(c,2),i=s[0],o=s[1],u=Object(d.useState)(null),b=Object(j.a)(u,2),h=b[0],p=b[1],f=Object(d.useState)(null),O=Object(j.a)(f,2),x=O[0],g=O[1],v=Object(d.useState)(!1),w=Object(j.a)(v,2),y=w[0],N=w[1],S=Object(d.useRef)(),L=function(){n&&(window.clearTimeout(null===S||void 0===S?void 0:S.current),S.current=window.setTimeout((function(){return N(!0)}),100))},_=function(){window.clearTimeout(null===S||void 0===S?void 0:S.current),N(!1)},P={placement:"top",modifiers:[{name:"computeStyles",options:{adaptive:!1}},{name:"offset",options:{offset:[0,10]}},{name:"arrow",options:{element:x,padding:10}}]},M=Object(D.a)(i,h,P),C=M.styles,E=M.attributes,F=M.update;if(Object(d.useEffect)((function(){F&&F()}),[n,F]),r){var A=Object(k.a)(Object(k.a)({},a),{},{onMouseEnter:L,onMouseLeave:_,onFocus:L,onBlur:_,ref:function(e){return o(e),t}});r=d.Children.map(r,(function(e,t){return t>0?e:Object(d.isValidElement)(e)?Object(d.cloneElement)(e,A):e}))}if(Object(d.isValidElement)(n)){var q={onLoad:F};n=Object(d.cloneElement)(n,q)}return Object(m.jsxs)(m.Fragment,{children:[r,y&&Object(l.createPortal)(Object(m.jsxs)("div",Object(k.a)(Object(k.a)({ref:p,className:"tooltip",style:Object(k.a)({},C.popper)},E.popper),{},{children:["string"===typeof n&&Object(m.jsx)("div",{className:"tooltip_content",children:n}),"string"!==typeof n&&n,Object(m.jsx)("div",{ref:g,className:"tooltip_arrow",style:C.arrow})]})),document.body)]})}))),q=(n(53),"EMPTY"),I="LOADING",J="SUCCESS",R=function(e){var t=e.status;return t===q?Object(m.jsxs)("section",{className:"center gray",children:[Object(m.jsx)("i",{className:"fas fa-exclamation"}),Object(m.jsx)("span",{children:"Search for a doi"})]}):t===I?Object(m.jsxs)("section",{className:"center gray",children:[Object(m.jsx)("i",{className:"fas fa-spinner fa-spin"}),Object(m.jsx)("span",{children:"Loading..."})]}):t===J?null:Object(m.jsxs)("section",{className:"center red",children:[Object(m.jsx)("i",{className:"far fa-times-circle"}),Object(m.jsx)("span",{children:t||"Couldn't get results"})]})},B=(n(54),function(e){return e.replace(/^\D*/g,"").replace(/v\d+$/g,"").trim()}),z=function(){return new URLSearchParams(window.location.search.substring(1)).get("doi")},W=function(e){var t=window.location.href,n=window.location.href.split(/[?#]/)[0]+(e?"?doi="+e:"");t!==n&&window.history.pushState(null,null,n)},X=function(e){var t=e.status,n=e.setStatus,r=e.setPreprint,a=e.setSimilarJournals,c=e.setSimilarPapers,s=e.setCoordinates,i=Object(d.useState)(z()||"e.g. 10.1101/833400"),o=Object(j.a)(i,2),l=o[0],u=o[1],b=Object(d.useState)(!1),h=Object(j.a)(b,2),p=h[0],f=h[1],O=Object(d.useCallback)((function(e){return u(e.target.value.trim())}),[]),x=Object(d.useCallback)(function(){var e=Object(v.a)(g.a.mark((function e(t){var i,o,l,j,d,b,h,p,f=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.doi,o=t.text,l=!(f.length>1&&void 0!==f[1])||f[1],i&&(i=B(i),u(i)),""!==i){e.next=5;break}return e.abrupt("return");case 5:return l&&W(i),n(I),e.prev=7,e.next=10,M({doi:i,text:o});case 10:return j=e.sent,d=j.preprint,b=j.similarJournals,h=j.similarPapers,p=j.coordinates,d=E(d),e.next=18,C(b);case 18:return b=e.sent,e.next=21,C(h);case 21:h=e.sent,b=F(b),h=F(h),n(J),r(d),a(b),c(h),s(p),e.next=41;break;case 31:e.prev=31,e.t0=e.catch(7),console.log(e.t0),"CustomError"!==e.t0.name&&(e.t0.message="Couldn't get results"),n(e.t0.message),r({}),a([]),c([]),s({}),w.a(e.t0,{tags:{doi:i}});case 41:case"end":return e.stop()}}),e,null,[[7,31]])})));return function(t){return e.apply(this,arguments)}}(),[n,r,a,c,s]),y=Object(d.useCallback)((function(){var e=z();e&&(u(e),x({doi:e},!1))}),[x]);Object(d.useEffect)((function(){z()&&x(z())}),[x]),Object(d.useEffect)((function(){return window.addEventListener("popstate",y),function(){return window.removeEventListener("popstate",y)}}),[y,x]);var k=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),f(!1),"text/plain"===(n=t.dataTransfer.files[0]).type){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,n.text();case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0="";case 11:r=e.t0,x({text:r});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("section",{id:"search",children:[Object(m.jsx)("p",{className:"center",children:Object(m.jsxs)("i",{children:["Enter the ",Object(m.jsx)("a",{href:"https://www.biorxiv.org/",children:"bioRxiv"})," or"," ",Object(m.jsx)("a",{href:"https://www.medrxiv.org/",children:"medRxiv"})," DOI of your preprint"]})}),Object(m.jsxs)("form",{className:"search",onSubmit:function(e){e.preventDefault(),x({doi:l})},onDragEnter:function(){return f(!0)},onDragLeave:function(){return f(!1)},onDragOver:function(e){return e.preventDefault()},onDrop:k,"data-drag":p,children:[Object(m.jsx)("input",{className:"search_input",value:l,onChange:O,type:"text",placeholder:"e.g. 10.1101/833400",disabled:t===I,onFocus:function(e){return e.target.select()}}),Object(m.jsx)(A,{content:"Search for related papers and journals",children:Object(m.jsx)("button",{className:"search_button",type:"submit",disabled:t===I,children:Object(m.jsx)("i",{className:"fas fa-search"})})})]})]})},G=function(e){var t=e.preprint,n=t.id,r=t.title,a=t.authors,c=t.journal,s=t.year,i=t.prelim,o=t.text;return Object(m.jsxs)("section",{id:"your-preprint",children:[Object(m.jsxs)("h3",{children:[Object(m.jsx)("i",{className:"fas fa-feather-alt"}),Object(m.jsx)("span",{children:"Your Preprint"})]}),!o&&Object(m.jsxs)("p",{children:[Object(m.jsx)("a",{href:"https://doi.org/"+n,className:"card_detail",children:r}),Object(m.jsx)("span",{className:"card_detail truncate",tabIndex:"0",children:a}),Object(m.jsxs)("span",{className:"card_detail truncate",tabIndex:"0",children:[c," \xb7 ",s]})]}),!o&&i&&Object(m.jsx)(A,{content:"These results were generated using the PDF version of the preprint, which is less reliable and can reduce the accuracy of predictions. Check back later when the full-text version is available.",children:Object(m.jsxs)("p",{className:"center gray",children:[Object(m.jsx)("i",{className:"fas fa-info-circle"}),Object(m.jsx)("span",{children:"Preliminary results"})]})}),o&&Object(m.jsx)(A,{content:"You uploaded a plain text version of your preprint",children:Object(m.jsxs)("p",{className:"center gray",children:[Object(m.jsx)("i",{className:"fas fa-info-circle"}),Object(m.jsx)("span",{children:"Plain text"})]})})]})},V=n(9),Y=n.n(V),H=(n(33),Y()("#ff980020")),U=Y()("#ff9800"),$=function(e){var t=e.similarJournals;return Object(m.jsxs)("section",{id:"similar-journals",children:[Object(m.jsx)(A,{content:"The closest journals within our generated paper embedding space",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("i",{className:"fas fa-bookmark"}),Object(m.jsx)("span",{children:"Most Similar Journals"})]})}),t.map((function(e,t){var n=e.journal,r=e.rank,a=e.distance,c=e.strength;return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)(A,{content:"Distance score: "+a.toFixed(2),children:Object(m.jsx)("div",{className:"card_score",style:{backgroundColor:U.mix(H,c)},children:r})}),Object(m.jsx)("div",{className:"card_details",children:Object(m.jsx)("a",{href:"https://www.google.com/search?q="+n,className:"card_detail",children:n})})]},t)}))]})},K=Y()("#ff980020"),Q=Y()("#ff9800"),Z=function(e){var t=e.similarPapers;return Object(m.jsxs)("section",{id:"similar-papers",children:[Object(m.jsx)(A,{content:"The closest paper within our generated paper embedding space",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("i",{className:"fas fa-scroll"}),Object(m.jsx)("span",{children:"Most Similar Papers"})]})}),t.map((function(e,t){var n=e.id,r=e.title,a=e.authors,c=e.year,s=e.journal,i=e.rank,o=e.distance,l=e.strength;return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)(A,{content:"Distance score: "+o.toFixed(2),children:Object(m.jsx)("div",{className:"card_score",style:{backgroundColor:Q.mix(K,l)},children:i})}),Object(m.jsxs)("div",{className:"card_details",children:[Object(m.jsx)("a",{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/"+n,className:"card_detail",children:r}),Object(m.jsx)("div",{className:"card_detail truncate",tabIndex:"0",children:a}),Object(m.jsxs)("div",{className:"card_detail truncate",tabIndex:"0",children:[s," \xb7 ",c]})]})]},t)}))]})},ee=(n(64),function(e){var t=e.selectedPc,n=e.setSelectedPc;return Object(m.jsx)("p",{className:"center",children:ge(de,be).map((function(e){return Object(m.jsx)(te,{number:e,selectedPc:t,setSelectedPc:n},e)}))})}),te=function(e){var t=e.number,n=e.selectedPc,r=e.setSelectedPc;return Object(m.jsx)(A,{content:Object(m.jsx)("img",{src:we(t),className:"cloud_enlarged",alt:"Principal component "+ve(t),style:{minHeight:"300px"}}),children:Object(m.jsx)("button",{className:"cloud_button","data-number":ve(t),"data-selected":n===t,title:(n===t?"Deselect":"Select")+" this principal component",onClick:function(){return r(n===t?null:t)},children:Object(m.jsx)("img",{src:we(t),alt:"Principal component "+ve(t)})})})},ne=n(18),re=function(e,t,n){return Math.max(Math.min(e,n),t)},ae=function(e){return Math.pow(e,2)},ce=function(e){return Math.sqrt(e)},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e=re(e,0,1);var n=1/(t=re(t,1e-5,1)),r=ce(2*ae(n)-1);return(1+ce(2)*ce(2*e*r+ae(n)-r-2*ae(e)+2*e)-r)/2},ie=function(e){var t=Object(d.useRef)(),n=Object(d.useState)(void 0),r=Object(j.a)(n,2),a=r[0],c=r[1];return Object(d.useEffect)((function(){if(t.current){var e=t.current.getBBox(),n=e.x,r=e.y,a=e.width,s=e.height;c([n,r,a,s].map((function(e){return e.toFixed(2)})).join(" "))}}),[e]),[t,a]},oe=(n(65),.85);oe*=1.05;var le=function(e){var t=e.cells,n=e.selectedPc,r=e.selectedCell,a=e.setSelectedCell,c=e.coordinates,s=ie(t),i=Object(j.a)(s,2),o=i[0],l=i[1];if(n){var u,d=Object(ne.a)(t);try{for(d.s();!(u=d.n()).done;){var b=u.value,h=b.pcs.find((function(e){return e.name===ve(n)}));b.score=(null===h||void 0===h?void 0:h.score)||0}}catch(L){d.e(L)}finally{d.f()}var p,f=Math.max.apply(Math,Object(y.a)(t.map((function(e){return Math.abs(e.score)}))))||1,O=Object(ne.a)(t);try{for(O.s();!(p=O.n()).done;){var x=p.value;x.strength=x.score/f||0}}catch(L){O.e(L)}finally{O.f()}}else{var g,v=t.map((function(e){return e.count})),w=Math.min.apply(Math,Object(y.a)(v)),k=Math.max.apply(Math,Object(y.a)(v)),N=Object(ne.a)(t);try{for(N.s();!(g=N.n()).done;){var S=g.value;S.strength=(S.count-w)/(k-w)||0,S.strength=se(S.strength,1)}}catch(L){N.e(L)}finally{N.f()}}return Object(m.jsx)("p",{children:Object(m.jsxs)("svg",{ref:o,viewBox:l,className:"map",children:[t.concat(r||[]).map((function(e,t){return Object(m.jsx)("rect",{className:"cell",x:e.x,y:e.y,width:oe,height:oe,"data-selected":e===r,fill:n?me.mix(e.strength>0?fe:Oe,Math.abs(e.strength)):pe.mix(he,e.strength),strokeWidth:.223125,onClick:function(){return a(e===r?null:e)}},t)})),"number"===typeof c.x&&"number"===typeof c.y&&Object(m.jsx)("circle",{className:"marker",strokeWidth:.223125,cx:c.x,cy:c.y,r:.44625})]})})},ue=(n(66),function(e){var t=e.selectedPc,n=e.coordinates;return Object(m.jsxs)("p",{className:"legend",children:[t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("span",{children:[Object(m.jsx)("span",{className:"legend_square",style:{backgroundColor:fe}}),"pos pc",ve(t)]}),Object(m.jsxs)("span",{children:[Object(m.jsx)("span",{className:"legend_square",style:{backgroundColor:Oe}}),"neg pc",ve(t)]})]}),!t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("span",{children:[Object(m.jsx)("span",{className:"legend_square",style:{backgroundColor:he}}),"many papers"]}),Object(m.jsxs)("span",{children:[Object(m.jsx)("span",{className:"legend_square",style:{backgroundColor:pe}}),"few papers"]})]}),n.x&&n.y&&Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("span",{children:[Object(m.jsx)("span",{className:"legend_circle",style:{backgroundColor:"var(--red)"}}),"your preprint"]})})]})}),je=(n(67),function(e){var t,n=e.selectedCell,r=n.lemmas||[],a=ie(r),c=Object(j.a)(a,2),s=c[0],i=c[1],o=r.map((function(e){return e.score})),l=Math.min.apply(Math,Object(y.a)(o)),u=Math.max.apply(Math,Object(y.a)(o)),b=Object(ne.a)(r);try{for(b.s();!(t=b.n()).done;){var h=t.value;h.strength=(h.score-l)/(u-l)||0}}catch(g){b.e(g)}finally{b.f()}var p=15,f=(i||"").split(" ")[2]||0,O=r.length*p+p,x=r.length*p+p;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h4",{children:"Papers"}),Object(m.jsx)("p",{children:n.count.toLocaleString()}),Object(m.jsx)("h4",{children:"Top Journals"}),Object(m.jsx)("p",{children:n.journals.map((function(e,t){var n=e.name,r=e.count;return Object(m.jsxs)("span",{className:"cell_detail_row",children:[Object(m.jsx)("span",{className:"truncate",children:n}),Object(m.jsxs)("span",{className:"truncate",children:[r.toLocaleString()," papers"]})]},t)}))}),Object(m.jsx)("h4",{children:"Top Lemmas"}),Object(m.jsx)("p",{children:Object(m.jsxs)("svg",{ref:s,viewBox:i,className:"chart",style:{width:f+"px"},children:[r.map((function(e,t){var n=Math.max(e.strength*(O-0),7.5),r=0+(t+1)*p;return Object(m.jsxs)(d.Fragment,{children:[Object(m.jsx)(A,{content:e.name,children:Object(m.jsx)("text",{x:-11.25,y:r,textAnchor:"end",dominantBaseline:"middle",fontSize:p,children:e.name.length>20?e.name.substr(0,20)+"...":e.name})}),Object(m.jsx)("rect",{x:0,y:r-3.75,width:n,height:7.5})]},t)})),Object(m.jsx)("path",{d:"M ".concat(0," ").concat(0," L ").concat(0," ").concat(x," L ").concat(O," ").concat(x),strokeWidth:1.5}),Object(m.jsx)("text",{x:(0+O)/2,y:x+11.25,textAnchor:"middle",dominantBaseline:"hanging",fontSize:p,children:"Association Strength"})]})})]})}),de=1,be=50,he=Y()("#606060"),pe=Y()("#e0e0e0"),fe=Y()("#ff9800"),me=Y()("#ffffff"),Oe=Y()("#2196f3"),xe=function(e){var t=e.coordinates,n=Object(d.useState)([]),r=Object(j.a)(n,2),a=r[0],c=r[1],s=Object(d.useState)(null),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(d.useState)(null),b=Object(j.a)(u,2),h=b[0],p=b[1];return Object(d.useEffect)((function(){(function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,fetch("./data/plot.json");case 3:return e.next=5,e.sent.json();case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("section",{id:"map",children:[Object(m.jsx)(A,{content:"A visualization of the PubMed landscape based on on textual content and model data",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("i",{className:"fas fa-map"}),Object(m.jsx)("span",{children:"Map of PubMed Central"})]})}),Object(m.jsx)(ee,{selectedPc:o,setSelectedPc:l}),Object(m.jsx)(le,{cells:a,selectedPc:o,selectedCell:h,setSelectedCell:p,coordinates:t}),Object(m.jsx)(ue,{selectedPc:o,coordinates:t})]}),h&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("hr",{}),Object(m.jsxs)("section",{id:"cell-details",children:[Object(m.jsxs)("h3",{children:[Object(m.jsx)("i",{className:"fas fa-square"}),Object(m.jsx)("span",{children:"Selected Square"})]}),Object(m.jsx)(je,{selectedCell:h,selectedPc:o,setSelectedPc:l})]})]})]})},ge=function(e,t){return Array.from({length:t-e+1},(function(t,n){return e+n}))},ve=function(e){return String(e).padStart(2,"0")},we=function(e){return"https://raw.githubusercontent.com/greenelab/annorxiver/master/biorxiv/pca_association_experiment/output/word_pca_similarity/figure_pieces/pca_XX_cossim_word_cloud.png".replace("XX",ve(e))},ye=function(){return Object(m.jsxs)("section",{id:"help",children:[Object(m.jsx)(A,{content:"Overview of this tool in more detail",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("i",{className:"fas fa-question-circle"}),Object(m.jsx)("span",{children:"About this tool"})]})}),Object(m.jsxs)("p",{children:["This tool uses a machine learning model trained on 1.7 million"," ",Object(m.jsx)("a",{href:"https://www.ncbi.nlm.nih.gov/pmc/tools/openftlist/",children:"PubMed Central open access documents"})," ","to find similar papers and journals based on the textual content of your"," ",Object(m.jsx)("a",{href:"https://www.biorxiv.org/",children:"bioRxiv"})," or"," ",Object(m.jsx)("a",{href:"https://www.medrxiv.org/",children:"medRxiv"})," preprint. These results can be used as a starting point when searching for a place to publish your paper."]}),Object(m.jsx)("p",{children:'The tool also provides a "map" of the PubMed Central documents, grouped into bins based on similar textual content, and shows you where your preprint falls on the map. Select a square to learn more about the papers in that bin.'}),Object(m.jsxs)("p",{children:["The map also incorporates a set of 50"," ",Object(m.jsx)("a",{href:"https://en.wikipedia.org/wiki/Principal_component_analysis",children:"principal components"})," ","(PCs) generated from bio/medRxiv. Each PC represents two high level concepts characterized by keywords of various strengths, illustrated in the word cloud thumbnails above the map. Select a thumbnail to color the map by that PC. Deeper orange squares will be papers that correlate more with the orange keywords in the image, and vice versa for blue."]}),Object(m.jsxs)("p",{children:["For more information, see the"," ",Object(m.jsx)("a",{href:"https://github.com/greenelab/preprint-similarity-search",children:"links in the readme"}),"."]})]})},ke=function(){return Object(m.jsx)("footer",{children:Object(m.jsx)("section",{children:Object(m.jsxs)("p",{children:["A project of the ",Object(m.jsx)("a",{href:"https://greenelab.com/",children:"Greene Lab"}),Object(m.jsx)("br",{}),Object(m.jsxs)("a",{href:"https://github.com/greenelab/preprint-similarity-search",children:[Object(m.jsx)("i",{className:"fab fa-github"}),Object(m.jsx)("span",{children:"View on GitHub"})]})]})})})},Ne=(n(68),function(){var e=Object(d.useState)(q),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(d.useState)({}),c=Object(j.a)(a,2),s=c[0],i=c[1],o=Object(d.useState)([]),l=Object(j.a)(o,2),u=l[0],b=l[1],h=Object(d.useState)([]),p=Object(j.a)(h,2),f=p[0],x=p[1],g=Object(d.useState)({}),v=Object(j.a)(g,2),w=v[0],y=v[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O,{}),Object(m.jsxs)("main",{children:[Object(m.jsx)(X,{status:n,setStatus:r,setPreprint:i,setSimilarJournals:b,setSimilarPapers:x,setCoordinates:y}),Object(m.jsx)(R,{status:n}),n===J&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(G,{preprint:s}),Object(m.jsx)("hr",{}),Object(m.jsx)(Z,{similarPapers:f}),Object(m.jsx)("hr",{}),Object(m.jsx)($,{similarJournals:u})]}),Object(m.jsx)("hr",{}),Object(m.jsx)(xe,{coordinates:w}),Object(m.jsx)("hr",{}),Object(m.jsx)(ye,{})]}),Object(m.jsx)(ke,{})]})});u.a({dsn:"https://b1183a2fe86f4a8f951e9bb67341c07f@o7983.ingest.sentry.io/5407669",environment:"production"}),Object(l.render)(Object(m.jsx)(Ne,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.2201f7a0.chunk.js.map